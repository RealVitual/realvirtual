{% extends "landing_2/common/_base.html" %}

{% block cssadicional %}
<link rel="stylesheet" href="static/web_2/js/swiper/swiper-bundle.min.css">
{% endblock %}

{% block classbody %}pageHome{% endblock %}

{% block content %}



<!-- <section class="b1">
    <img src="static/web_2/img/credicorp/home-b1-fondo.svg" alt="" class="imgFull">
    <img src="static/web_2/img/credicorp/montain-bottom.svg" alt="" class="imgFull bottom">
    <div class="grilla">
        <div class="b1Info">
            <h1>El encuentro de agilidad más esperado del Perú</h1>
            <div class="gParrafo">
                <p>Únete a una comunidad de mentes brillantes en un evento que celebra la vanguardia y el poder de la colaboración. Con experiencias que van desde la innovación digital hasta la inteligencia artificial, este es tu momento para explorar, aprender y cocrear el futuro de la agilidad</p>
            </div>
            <div class="b1Data">
                <div class="b1DataItem">
                    <img src="static/web_2/img/credicorp/home-b1-img1.png" alt="">
                    <p>Hotel Melía Lima</p>
                </div>
                <div class="b1DataItem">
                    <img src="static/web_2/img/credicorp/home-b1-img2.png" alt="">
                    <p>12 y 13 de Diciembre</p>
                </div>
                <div class="b1DataItem">
                    <img src="static/web_2/img/credicorp/home-b1-img3.png" alt="">
                    <p>Desde las 08:00 A.M</p>
                </div>
            </div>
             <a href="#" id="b1ButtonRegister" class="gButton">Registrarme</a>
        </div>
        <figure>
            <img src="static/web_2/img/credicorp/home-b1-imgcentral.png" alt="">
        </figure>
    </div>
</section> -->

<section class="b1">
    <picture class="imgCover">
        <source srcset="{{home_page.mobile_banner.url}}" media="(max-width: 767px)">
        <source srcset="{{home_page.banner.url}}" media="(max-width: 768px)">
        <img src="{{home_page.banner.url}}" width="1920" height="713"  alt="Myimage">
    </picture>
    <div class="grilla">
        <div class="b1Info">
            {% if home_page.image_banner %}
                <img src="{{home_page.image_banner.url}}" alt="" width="650" class="imgLogo">
            {% endif %}
            <h4>{{home_page.main_title}}</h4>
            {% if not logged_user %}
            <a href="#" class="button" id="b1ButtonRegister">Registrate</a>
            {% endif %}
            <div class="b1List">
                <div class="b1Item">
                    <img src="/static/web_2/img/credicorp/marker-black.svg" alt="">
                    <p>{{home_page.address_description|default:""}}</p>
                </div>
                <div class="b1Itemwrap f aic jcfs ffrw">
                    <div class="b1Item">
                        <img src="/static/web_2/img/credicorp/calendar2-black.svg" alt="">
                        <p>{{home_page.date_description|default:""}}</p>
                    </div>
                    <div class="b1Item">
                        <img src="/static/web_2/img/credicorp/timer-black.svg" alt="">
                        <p>{{home_page.time_description|default:""}}</p>
                    </div>
                </div>
            </div>

        </div>
        <div class="b1Bottom">
            <p>{{home_page.banner_second_section|default:""}}</p>
            {% if home_page.banner_second_section_image %}
                <figure>
                    <img src="{{home_page.banner_second_section_image.url}}" alt="">
                </figure>
            {% endif %}
        </div>
    </div>
</section>


<div class="b1PopupInfo">
    <a href="#" class="b1CloseMapa icon-close"></a>
    <h3>
        {{home_page.banner_second_section_internal_title|default:""}}
        <span>{{home_page.banner_second_section_internal_text|default:""}}</span>
    </h3>
    {% if home_page.banner_second_section_internal_image %}
        <figure>
            <img src="{{home_page.banner_second_section_internal_image.url}}" alt="">
        </figure>
    {% endif %}
</div>

{% if company.use_counter%}
    <section class="b22">
        <div class="grilla">
            <h3>{{company.counter_text}}</h3>
            <div id="contador" data-date="{{company.set_counter_time}}">
                <div class="elemento">
                    <span id="dias">00</span>
                    <p>DÍAS</p>
                </div>
                <div class="elemento">
                    <span id="horas">00</span>
                    <p>HORAS</p>
                </div>
                <div class="elemento">
                    <span id="minutos">00</span>
                    <p>MINUTOS</p>
                </div>
                <div class="elemento">
                    <span id="segundos">00</span>
                    <p>SEGUNDOS</p>
                </div>
            </div>
        </div>
    </section>
{% endif %}

<section class="b2 pY scrollWrap anclaBlock" id="acerca">
    <div class="grilla scrollItem" id="elb2">
        <h2 class="gTitle">
            <span>{{home_page.main_event_title}}</span>
            {{home_page.main_event_sub_title}}
        </h2>
        <div class="b2Wrap f aic jcsb">
            <div class="b2Img videoBoxContent">
                <figure class="imgCover">
                    <img src="{{home_page.main_event_image.url}}" alt="">
                </figure>
                <a href="#" class="clickVideo box clickVideoBox " data-urlvideo="{{home_page.main_event_video_url}}"><i class="icon-play"></i></a>
            </div>
            <div class="b2Info">
                <div class="gParrafo">
                    <p>{{home_page.main_event_description}}</p>
                </div>
                <div class="b2ListNumber column3 column1-480">
                    {% for row in home_page.get_indicators %}
                        <div class="b2ItemNUmber">
                            <p>+<span class="b2Number" data-num="{{row.number}}"></span></p>
                            <p class="info">{{row.title}}</p>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>

<section class="b3 pY scrollWrap">
    <div class="grilla scrollItem">
        <div class="b3Wrap f aifs jcsb fdc-1024">
            <div class="b3Left">
                <h3 class="gTitle">
                    <span>{{home_page.module_section_name}}</span>
                    {{home_page.module_section_title}}
                </h3>
                <div class="gParrafo">
                    <p>{{home_page.module_section_text}}</p>
                </div>
            </div>
            <div class="b3Right g">
                {% for row in home_page.get_modules %}
                    <div class="b3Item f aic jcfs fdc-480">
                        <figure>
                            <img src="{{row.image.url}}" alt="">
                        </figure>
                        <div class="b3Info">
                            <p class="name">{{row.title}}</p>
                            <div class="gParrafo">
                                <p>{{row.description}}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</section>

{% if header_section.show_schedule_section %}
<section class="b4 pY scrollWrap anclaBlock" id="agenda">
    <div class="grilla scrollItem">
        <div class="b4Top f aife jcsb fdc-480">
            <h4 class="gTitle"><span>{{home_page.schedule_section_name}}</span>{{home_page.schedule_section_title}}</h4>
            <div class="b4SelectGroup g column3 column1-480 f">
                {% for f in filters %}
                    {% if f.filter_name in filtered_filters%}
                        <div class="b4ItemSelect">
                            <a href="#" class="b4ClickSelect arrowClick">
                                {% for fi in filtered %}
                                    {% if fi.filter_name == f.filter_name%}
                                        <span>{{f.name}}</span>
                                        <p class="name">{{fi.category}}</p>
                                    {% endif %}
                                {% endfor %}
                            </a>
                            <ul>
                                {% for category in f.ordered_categories %}
                                    {% if category.filter_name not in filtered_categories %}
                                        <li>
                                            <a data-category="{{category.filter_name}}" data-filter="{{f.filter_name}}" href="#">{{category.name}}</a>
                                        </li>
                                    {% endif %}
                                {% endfor  %}
                                <li>
                                    <a data-category="all" data-filter="{{f.filter_name}}" href="#">Todos</a>
                                </li>
                            </ul>
                        </div>
                    {% else %}
                    <div class="b4ItemSelect">
                        <a href="#" class="b4ClickSelect arrowClick">
                            <span>{{f.name}}</span>
                            <p class="name">Todos</p>
                        </a>
                        <ul>
                            {% for category in f.ordered_categories %}
                                <li>
                                    <a data-category="{{category.filter_name}}" data-filter="{{f.filter_name}}" href="#">{{category.name}}</a>
                                </li>
                            {% endfor  %}
                        </ul>
                    </div>
                    {% endif %}

                {% endfor %}
            </div>
        </div>
        <div class="b4List g">
            {% for schedule in schedules %}
            <div class="b4ItemList">
                <div class="b4ItemCLick f aic jcsb arrowClick fdc-1024">
                    <div class="b4ItemListLeft f aic jcfs fdc-480">
                        <div class="live g">
                            <p class="date f aic jcfs">{{schedule.get_date}}</p>
                                {% if schedule.get_current_status == "is_live" or schedule.get_current_status == "past" %}
                                    {% if schedule.video_url %}
                                        <a href="{{schedule.video_url}}" class="reproducir">
                                            Reproducir
                                            <i class="icon-play"></i>
                                        </a>
                                    {% endif %}
                                {% else %}
                                    {% if logged_user %}
                                        {% if schedule.scheduled %}
                                            <a href="#" class="schedule_event reproducir" data-id="{{schedule.id}}" data-status="0" id="{{schedule.id}}">
                                                Agendado
                                            </a>
                                        {% else %}
                                            <a href="#" class="schedule_event agendar" data-id="{{schedule.id}}" data-status="1" id="{{schedule.id}}">
                                                Agendar
                                            </a>
                                        {% endif %}

                                    {% endif %}
                                {% endif %}
                        </div>
                        <p class="name">{{schedule.name}}</p>
                    </div>
                    <div class="b4ItemListRight column2 column1-480">
                        <p class="hour"> {{schedule.start_time}} - {{schedule.end_time}}</p>
                        <p class="theme"> {{schedule.get_principal_category}} </p>
                    </div>
                </div>
                <div class="b4ItemInfo">
                    <div class="b4ContntInfo f aic jcsb fdc-768">
                        <div class="b4ItemInfoLeft">
                            <p class="message">{{schedule.get_secondary_category}}</p>
                            {% comment %}
                                <p class="nameEvent">Bienvenida al Evento Bienvenida al Evento Bienvenida al Evento Bienvenida al Evento Bienvenida al Evento</p>
                            {% endcomment %}
                            <div class="gParrafo">
                                <p>{{schedule.description}}</p>
                            </div>
                        </div>
                        <div class="b4ItemInfoRight">
                            {% for exhibitor in schedule.get_exhibitors %}
                                <div class="b4Expos g">
                                    <a href="#" class="f aic jcfs b25OpenPopupPerson"
                                    data-name="{{exhibitor.name}}"
                                    data-cargo="{{exhibitor.title}}"
                                    data-info="{{exhibitor.description}}"
                                    data-url="{{exhibitor.link}}"
                                    {% if exhibitor.flag_image %}
                                    data-bandera="{{exhibitor.flag_image.url}}"
                                    {% else %}
                                    data-bandera=""
                                    {% endif %}
                                    data-img="{{exhibitor.image.url}}">
                                        {% if exhibitor.flag_image %}
                                            <img src="{{exhibitor.flag_image.url}}" alt="">
                                        {% else %}
                                            <img src="static/web_2/img/credicorp/pais.svg" alt="">
                                        {% endif %}
                                        <p class="">{{exhibitor.name_on_list}} <samp>|</samp>{{exhibitor.organization}}</p>
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

{% if header_section.show_exhibitors_section %}
<section class="b5 scrollWrap anclaBlock pY scrollWrap" id="expositor">
    <div class="wancho scrollItem">
        <h3 class="gTitle white tac">
            <span>{{home_page.exhibitors_section_name}}</span>
            {{home_page.exhibitors_section_title}}
        </h3>
    </div>
    <div class="gSwiperContent scrollItem">
        <div class="b5Swiper swiper-container scrollItem swiper" data-initial="3">
            <div class="b5Wrap swiper-wrapper">
                {% for ex in exhibitors %}
                    <a  href="#" class="b25OpenPopupPerson b5Item swiper-slide zoomImageHover swiper-slide"
                        data-name="{{ex.name}}"
                        data-cargo="{{ex.title}}"
                        data-info="<p>{{ex.description}}</p>"
                        data-url="{{ex.link}}"
                        data-bandera="{{ex.flag_image.url}}"
                        data-img="{{ex.image.url}}">
                        {% if ex.is_principal %}
                            <span class="tag">{{ex.text_is_principal}}</span>
                        {% endif %}
                        <figure>
                            <img src="{{ex.image.url}}" alt="" width="280">
                        </figure>
                        <div class="b5Text">
                            <h4>{{ex.name}}</h4>
                            <h5>{{ex.organization}}</h5>
                        </div>
                    </a>
                {% endfor %}
            </div>
        </div>
        <div class="b5Nav gNav">
            <div class="b5Prev gPrev"></div>
            <div class="b5Next gNext"></div>
        </div>
    </div>
</section>
<div class="b25Popup">
    <a href="#" class="b25ClosePopup icon-close"></a>
    <div class="b25PopupImage">
        <figure class="">
            <img src="" class="b25Popupimg" width="1920" height="713"  alt="Myimage">
        </figure>
    </div>
    <div class="b25InfoPopup f aic jcfs">
        <div class="b25InfoPopupContent">
            <div class="b25TopName">
                <h3 class="b25PopupName gTitle"></h3>
                <img  class="b25PopupBandera"  alt="">
            </div>
            <h4 class="b25PopupCargo"></h4>
            <div class="gParrafo b25PopupText white">
            </div>
            <a target="_blank" href="#" class="b25linkedin">Ver perfil en Linkedin <i class="icon-arrowRight"></i></a>
        </div>
    </div>
</div>
{% endif %}



{% if header_section.show_blog_section %}
<section class="b6 pY scrollWrap anclaBlock" id="blog">
    <div class="grilla scrollItem">
        <div class="b6Top f aic jcsb ">
            <h4 class="gTitle">
                <span>{{home_page.blog_section_name}}</span>
                {{home_page.blog_section_title}}
            </h4>
            <a href="{% url 'landing:blog' %}" class="gButton">{{home_page.blog_button_title}}</a>
        </div>
        {% if blog_posts_number > 0 %}
        <div class="b6Wrap g column2 column1-768">
            <div class="b6Left">
                <div class="b6Item zoomImageHover">
                    <img src="{{blog_posts.0.front_image.url}}" alt="">
                    <div class="b6Info">
                        <p class="date">{{blog_posts.0.publish_date}}</p>
                        <p class="name">{{blog_posts.0.name}}</p>
                    </div>
                </div>
            </div>
            {% if blog_posts_number > 1 %}
            <div class="b6Right g">
                <div class="b6Item zoomImageHover">
                    <img src="{{blog_posts.1.front_image.url}}" alt="">
                    <div class="b6Info">
                        <p class="date">{{blog_posts.1.publish_date}}</p>
                        <p class="name">{{blog_posts.1.name}}</p>
                    </div>
                </div>
                {% if blog_posts_number > 2 %}
                <div class="b6Item zoomImageHover">
                    <img src="{{blog_posts.2.front_image.url}}" alt="">
                    <div class="b6Info">
                        <p class="date">{{blog_posts.2.publish_date}}</p>
                        <p class="name">{{blog_posts.2.name}}</p>
                    </div>
                </div>
                {% endif %}
            </div>
            {% endif %}
        </div>
        {% endif %}

    </div>
</section>
{% endif %}
{% if header_section.show_sponsors_section %}
<section class="b7 pY scrollWrap anclaBlock" id="empresa">
    <div class="grilla scrollItem">
        <h4 class="gTitle tac">
            <span>{{home_page.sponsors_section_name}}</span>
            {{home_page.sponsors_section_text}}
        </h4>
        <div class="b7Wrap column5 column4-1024 column3-768 column2-480">
            {% for sponsor in sponsors %}
                <div class="b7Item">
                    <figure>
                        <img src="{{sponsor.image.url}}" alt="">
                    </figure>
                </div>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}
{% if home_page.final_image %}
    <section class="b31 pY scrollWrap">
        <div class="grilla scrollItm">
            <figure>
                <img src="{{home_page.final_image.url}}" alt="">
            </figure>
        </div>
    </section>
{% endif %}

{% endblock %}

{% block jsfinal %}
<script src="static/web_2/js/swiper/swiper-bundle.min.js"></script>
{% if not logged_user %}
<script src="https://www.google.com/recaptcha/api.js?render={{recaptcha_site_key}}"></script>
<script>
    function getReCaptcha(){
        grecaptcha.ready(function() {
            grecaptcha.execute('{{recaptcha_site_key}}', {action: "/"}).then(function(token) {
                let captcha_register = document.getElementById('g-recaptcha-response')
                if(captcha_register){
                    document.getElementById('g-recaptcha-response').value = token;
                }
                document.getElementById('g-recaptcha-response_login').value = token;
            });
        });
    }
    getReCaptcha();
    setInterval(function(){getReCaptcha();}, 110000);
</script>
{% endif %}
<script>
    function onClick(e) {
      e.preventDefault();
      grecaptcha.ready(function() {
        grecaptcha.execute('{{recaptcha_site_key}}', {action: 'submit'}).then(function(token) {
        });
      });
    }
</script>
<script type="text/javascript">

//bloque 3 - js
eventCountAnimate("elb2","b2Number",3,1)

document.addEventListener('DOMContentLoaded', function () {
    const selects = document.querySelectorAll('.b4ClickSelect');

    selects.forEach(clickSelect => {
        clickSelect.addEventListener('click', function (e) {
            e.preventDefault();
            e.stopPropagation();

            const parent = this.closest('.b4ItemSelect');
            const isActive = parent.classList.contains('active');

            document.querySelectorAll('.b4ItemSelect').forEach(item => {
                item.classList.remove('active');
                const link = item.querySelector('.b4ClickSelect');
                if (link) link.classList.remove('active');
            });

            if (!isActive) {
                parent.classList.add('active');
                this.classList.add('active');
            }
        });

        const parent = clickSelect.closest('.b4ItemSelect');
        const items = parent.querySelectorAll('ul li a');
        const nameDisplay = clickSelect.querySelector('.name');

        items.forEach(item => {
            item.addEventListener('click', function (e) {
                e.preventDefault();
                e.stopPropagation();
                let filter = this.getAttribute('data-filter')
                let category = this.getAttribute('data-category')
                console.log(filter)
                console.log(category)
                nameDisplay.textContent = this.textContent;
                let currentUrl = window.location.href;
                if (category == 'all'){
                    let params = new URL(document.location.toString()).searchParams;
                    params.delete(filter);
                    let url = new URL(window.location.origin + "/#agenda");
                    url.search = params.toString();
                    window.location.href = url.toString();
                }else{
                    if(!currentUrl.includes('#')){
                        let url = new URL(currentUrl + '#agenda');
                        url.searchParams.set(filter, category);
                        window.location.href = url.toString();
                    }else{
                        let url = new URL(currentUrl);
                        url.searchParams.set(filter, category);
                        window.location.href = url.toString();
                    }

                }
                parent.classList.remove('active');
                clickSelect.classList.remove('active');
            });
        });
    });

    document.addEventListener('click', function () {
        document.querySelectorAll('.b4ItemSelect').forEach(item => {
            item.classList.remove('active');
            const link = item.querySelector('.b4ClickSelect');
            if (link) link.classList.remove('active');
        });
    });

    eventClickAccordion('b4ItemCLick')
    document.querySelectorAll('.reproducir, .agendar').forEach(btn => {
        btn.addEventListener('click', function(e) {
            e.stopPropagation();
            var item = $(this);
            var data_id = item.attr('data-id')
            var status = item.attr('data-status')
            $.ajax({
                url : "{% url 'events:generate_schedule' %}",
                type : "post",
                data: {
                    schedule_id: data_id,
                    status: status,
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
            }).done(function(data) {
                if (data.success) {
                    if(status == 1){
                        let s_button = $("#"+ data_id);
                        s_button.addClass('reproducir');
                        s_button.removeClass('agendar');
                        s_button.attr('data-status', 0);
                        s_button.textContent = "Agendado";
                    }else{
                        let s_button = $("#"+ data_id);
                        s_button.removeClass('reproducir');
                        s_button.addClass('agendar');
                        s_button.attr('data-status', 1);
                        s_button.textContent = "Agendar";
                    }
                }
            });
        });
    });

    //$('.schedule_event').click(function(e){
    //    e.preventDefault();
    //});

});




{% if header_section.show_exhibitors_section %}
   //************b5-js*******************
   let elSwiperb5 = document.getElementsByClassName('b5Swiper')[0].dataset.initial
   const breakpoint = window.matchMedia('(max-width: 1024px)');
   const breakpointChecker = () => {
       let getCountItems = document.getElementsByClassName('b5Item').length;
       console.log(getCountItems);
       breakpoint.matches === true ?
           (getCountItems >= 2 ? enableSwiper(elSwiperb5) : destroySwiper()):
           (getCountItems > elSwiperb5 ? enableSwiper(elSwiperb5) : destroySwiper())
   }
   let mySwiper;
   let elWrapSwiperb5 = document.getElementsByClassName('b5')[0]
   const destroySwiper = () =>{
       elWrapSwiperb5.classList.add('noSwiper')
       elWrapSwiperb5.classList.remove('swiperActive')
       if(mySwiper !== undefined) {
           return mySwiper.destroy(true,true);
       }
   }
   const enableSwiper = (initial) => {
       elWrapSwiperb5.classList.remove('noSwiper')
       elWrapSwiperb5.classList.add('swiperActive')
       mySwiper = new Swiper ('.b5Swiper', {
           loop: true,
           spaceBetween: 24,
           centeredSlides: true,
           disableOnInteraction: false,
           pagination: {
               el: '.b5Pagination',
               type: 'bullets',
               clickable: true
           },
           autoplay: {
               delay: 5000,
           },
           navigation: {
               nextEl: '.b5Next',
               prevEl: '.b5Prev',
           },
           breakpoints:{
               1024:{
                  slidesPerView: 'auto',
                  spaceBetween: 24,
               },
               768:{
                  slidesPerView: 'auto',
                  spaceBetween: 24,
               },
               320:{
                  slidesPerView: 'auto',
                  spaceBetween: 24,
               }
           }
       });
   };
   breakpoint.addListener(breakpointChecker);
   breakpointChecker();
   let elb25OpenPopupPerson = document.getElementsByClassName("b25OpenPopupPerson")
   let elb25PopupName = document.getElementsByClassName("b25PopupName")[0];
   let elb25Popupimg = document.getElementsByClassName("b25Popupimg")[0];
   let elb25PopupCargo = document.getElementsByClassName("b25PopupCargo")[0];
   let elb25PopupText = document.getElementsByClassName("b25PopupText")[0];
   let elb25linkedin = document.getElementsByClassName("b25linkedin")[0];
   let elb25Popup = document.getElementsByClassName("b25Popup")[0];
   let elb25ClosePopup = document.getElementsByClassName("b25ClosePopup")[0];
   let elb25PopupBandera = document.getElementsByClassName("b25PopupBandera")[0];

   for(const b25OpenPopupPerson of elb25OpenPopupPerson){
       b25OpenPopupPerson.addEventListener("click",function(e){
           e.preventDefault();
           elb25Popup.classList.add('active');
           OVERLAY.classList.add('active');
           OVERLAY.style.zIndex = 500
           let getName = this.dataset.name;
           let getCargo = this.dataset.cargo;
           let getInfo = this.dataset.info;
           let getUrl = this.dataset.url;
           let getImg = this.dataset.img;
           let getBander = this.dataset.bandera;

           elb25PopupName.innerText = getName;
           elb25PopupCargo.innerText = getCargo;
           elb25Popupimg.setAttribute('src',getImg);
           elb25PopupText.innerHTML = getInfo;
           if(getUrl){
            elb25linkedin.setAttribute("href",getUrl);
            elb25linkedin.style.display = '';
           }else{
            elb25linkedin.style.display = 'none';;
           }
           elb25PopupBandera.setAttribute("src",getBander);
       });
   }
   elb25ClosePopup.addEventListener("click",function(e){
    e.preventDefault();
    this.parentNode.classList.remove('active')
    OVERLAY.removeAttribute("style");
    OVERLAY.classList.remove('active')
});
{% endif %}


if(document.getElementsByClassName('b22')[0]){
    function actualizarContador() {
        const fechaObjetivoString = document.getElementById("contador").getAttribute("data-date");
        const [fecha, hora] = fechaObjetivoString.split(' ');
        const [dia, mes, año] = fecha.split('-');
        const fechaObjetivoISO = `${año}-${mes}-${dia}T${hora}`;
        const fechaObjetivo = new Date(fechaObjetivoISO);
        const ahora = new Date();
        const diferencia = fechaObjetivo - ahora;
        if (diferencia > 0) {
            const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
            const horas = Math.floor((diferencia % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutos = Math.floor((diferencia % (1000 * 60 * 60)) / (1000 * 60));
            const segundos = Math.floor((diferencia % (1000 * 60)) / 1000);
            document.getElementById("dias").innerText = dias.toString().padStart(2, "0");
            document.getElementById("horas").innerText = horas.toString().padStart(2, "0");
            document.getElementById("minutos").innerText = minutos.toString().padStart(2, "0");
            document.getElementById("segundos").innerText = segundos.toString().padStart(2, "0");
        } else {
            document.getElementById("dias").innerText = "00";
            document.getElementById("horas").innerText = "00";
            document.getElementById("minutos").innerText = "00";
            document.getElementById("segundos").innerText = "00";
        }
    }
    setInterval(actualizarContador, 1000);
}

let elb1CloseMapa = document.getElementsByClassName('b1CloseMapa')[0]
let elb1Bottom = document.getElementsByClassName('b1Bottom')[0]
let elb1PopupInfo = document.getElementsByClassName('b1PopupInfo')[0]

elb1Bottom.addEventListener('click',function(e){
    e.preventDefault();
    elb1PopupInfo.classList.add('active')
    OVERLAY.classList.add('active')
    OVERLAY.style.zIndex = 100
})
elb1CloseMapa.addEventListener('click',function(e){
    e.preventDefault();
    elb1PopupInfo.classList.remove('active')
    OVERLAY.classList.remove('active')
    OVERLAY.removeAttribute('style')
})
</script>
{% endblock %}
